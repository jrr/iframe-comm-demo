<html>
  <script>
    function sendMessageToIframe() {
      console.log("Outside: sendMessageToIframe()");
      i = document.querySelector("iframe");
      i.contentWindow.postMessage("hello from parent", "*");
    }
    window.addEventListener(
      "message",
      (event) => {
        console.log("Outside: received message:", event);
        document.querySelector("#message-buffer").append(event.data + "\n");
      },
      false
    );
  </script>

  <body>
    <center>
      <h1>iframe communication</h1>

      <table width="80%" height="50%" border="1">
        <tr>
          <td width="50%">
            <p>I'm outside!</p>
            <button onclick="sendMessageToIframe()">
              Send Message To Iframe
            </button>
            <hr />
            <pre id="message-buffer" />
          </td>
          <td width="50%">
            <iframe src="inner.html" width="100%" height="100%"></iframe>
          </td>
        </tr>
      </table>
    </center>
  </body>
</html>
