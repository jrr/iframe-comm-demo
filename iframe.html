<html>
  <head>
    <meta charset="utf-8" />
  </head>
  <script src="messaging.js"></script>
  <script>
    window.addEventListener(
      "message",
      (event) => {
        console.log("Iframe received event:", {
          data: event.data,
          origin: event.origin,
        });

        handleIncomingMessage(event);
      },
      false
    );
  </script>

  <body>
    <p id="page-id"></p>

    <div>
      Restrict target to:
      <input
        type="radio"
        id="star"
        name="restrict-target"
        value="unrestricted"
        checked
      />
      * &nbsp; &nbsp;
      <input type="radio" id="gitlab" name="restrict-target" value="gitlab" />
      GitLab &nbsp; &nbsp;
      <input type="radio" id="github" name="restrict-target" value="github" />
      GitHub
    </div>
    <br />

    <div>
      Restrict origin to:

      <input
        type="radio"
        id="star"
        name="restrict-origin"
        value="unrestricted"
        checked
      />
      (unrestricted) &nbsp; &nbsp;
      <input type="radio" id="gitlab" name="restrict-origin" value="gitlab" />
      GitLab &nbsp; &nbsp;
      <input type="radio" id="github" name="restrict-origin" value="github" />
      GitHub
    </div>

    <br />

    <button onclick="sendMessageToParent()">Send message to parent</button>

    <hr />

    <pre id="message-buffer" />

    <script>
      document.getElementById("page-id").innerText = `(${document.URL})`;
    </script>
  </body>
</html>
